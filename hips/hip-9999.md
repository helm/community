---
hip: 9999
title: "Helm Resolving Dependencies First Option"
authors: [ "protosam" ]
created: "2021-09-27"
type: "feature"
status: "draft"
---

## Abstract
All chart dependencies are rendered with the parent chart before being sent to the cluster. This can prevent parent charts from using CRDs from charts that manage their own CRD life cycle. Resolving and installing dependencies in a specified order can solve this issue.

## Specification
In the `Chart.yaml` adding `dependenciesFirst: true` would signal helm to install the dependencies before the package and they should be installed in order separately. The default value for `dependenciesFirst` should be `false` which indicates to helm to do current behavior.

## Motivation
Dependencies aren't very interoperable between repos when CRDs are involved.

As-is, it is possible to:
* Create multi-phase tamplates that involve using `helm install` followed by `helm upgrade` to work around this problem
* Use other tools like helmfile to work around the issue

## Rationale
The verb `upgrade` should be reserved for upgrades, not phase 2 steps for installs.

The fact that tools like helmfile exist, shows that dependencies is lacking functionality that people want in their charts. 

## Backwards Compatibility
Implementing this as described has no implications to backwards compatibility.

## Reference Implementation
TODO: Protosam will deliver a reference implementation should this reach status `provisional`.
