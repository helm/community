---
hip: 9999
title: "Automated Release Process for Helm"
authors: ["Scott Rigby <scott@r6by.com>"]
created: "2025-09-12"
type: "process"
status: "draft"
---

## Abstract

This HIP proposes automating the Helm release process through GitHub Actions while maintaining human review gates. The automation transforms the current 11-step manual checklist into a three-click process: trigger preparation, publish draft, merge docs PR. All changes flow through pull request reviews, preserving security while eliminating repetitive tasks.

## Motivation

The current 11-step [Release Checklist](https://github.com/helm/helm-www/blob/main/content/en/docs/community/release_checklist.md) requires manual coordination across helm/helm and helm/helm-www repositories, leading to human error, time consumption, and documentation delays. This automation preserves human judgment while eliminating repetitive tasks.

## Design Principles

- **Human Review Gates**: All changes require PR approval before implementation
- **Draft Releases**: Created for review before triggering documentation updates
- **Security Preserved**: Maintains signed commits and GPG signatures
- **Fallback Ready**: Manual process remains fully functional

## Automation Flow

### Workflow Process

```mermaid
flowchart TD
    A[Manual: Prepare Release Workflow] --> B[Auto: Create PR with version updates]
    B --> C{Manual: Review & Merge PR}
    C -->|Merge| D[Auto: Create Draft Release]
    D --> E{Manual: Review Draft & Publish}
    E -->|Publish| F[Auto: Trigger Docs Workflow<br/>repository_dispatch]
    F --> G[Auto: Create Docs PR]
    G --> H{Manual: Review & Merge Docs PR}

    %% Manual fallback options
    A -.->|Fallback| I[Manual: Docs Update Workflow]
    I --> G

    %% Styling for light/dark mode compatibility
    classDef manual fill:#cce7ff,stroke:#0066cc,stroke-width:2px,color:#000
    classDef auto fill:#e6ccff,stroke:#6600cc,stroke-width:2px,color:#000
    classDef decision fill:#ffe6cc,stroke:#cc6600,stroke-width:2px,color:#000

    class A,C,E,H,I manual
    class B,D,F,G auto
    class C,E,H decision
```

### User Experience

The release process starts with a **manual workflow trigger** where maintainers enter the target version (e.g., `v4.0.0-alpha.2` or `v3.20.0`) in GitHub's workflow dispatch UI. This creates a preparation branch with all necessary version updates and opens a pull request for review.

<img src="./hip-9999-01.png" width="400" />

Once the PR is **merged**, automation takes over: it creates a persistent **release branch** (like `release-4.0` and `release-3.20`) from the appropriate base branch (`main` for v4.x, `dev-v3` for v3.x), cherry-picks the version commit, creates a signed tag, and **drafts the GitHub release**. The draft sits ready for maintainer review - they can test artifacts, verify release notes, and make adjustments before publishing.

When the maintainer **publishes the draft release**, it automatically triggers the documentation workflow in the helm-www repository, creating a pull request with updated version information, release dates, and compatibility matrices. This ensures the website stays synchronized with each release without manual coordination.

**Fallback options** provide resilience: if the cross-repository automation fails, maintainers can manually trigger the docs update workflow with the same simple version input interface. Every change flows through pull request reviews, maintaining quality control while eliminating repetitive manual tasks.

The experience transforms release management from an error-prone 11-step checklist into a **three-click process**: trigger preparation, publish draft, merge docs PR.

### Example Implementation Repos

Working examples demonstrating the complete automation:
- [Example Source Repository](https://github.com/scottrigby/example-actions-autorelease-source) - Demonstrates helm/helm automation
- [Example Docs Repository](https://github.com/scottrigby/example-actions-autorelease-docs) - Demonstrates helm/helm-www automation

Example completion status:
- [x] Cross-repository automation via repository_dispatch
- [x] Draft release creation with human review gates
- [x] Persistent release branches for patch releases
- [x] Dynamic documentation updates with version/date tracking
- [x] Manual fallback workflows
- [ ] GPG signing of release artifacts
- [ ] Kubernetes version skew calculation from go.mod
- [ ] GitHub milestone management
- [ ] Release artifact attachment

### File Structure

```
helm/helm/
├── .github/workflows/
│   ├── prepare-release.yml      # Manual trigger, creates PR with version updates
│   ├── trigger-release.yml      # Auto trigger on PR merge
│   └── create-release.yml       # Creates release branch, tag, and draft release
└── scripts/
    ├── update-version.sh        # Updates version strings in code and test files
    └── generate-release-notes.sh # Release notes template from git history

helm/helm-www/
└── .github/workflows/
    ├── update-version.yml       # Creates PR to update website configuration
    └── manual-update-docs.yml   # Manual fallback for docs updates
```

**Key mechanisms:**
- Cross-repository communication via `repository_dispatch` events
- Draft releases created for human review before docs automation triggers
- Persistent release branches for patch release support
- All changes flow through pull request reviews

## Security & Compatibility

**Backwards Compatibility**: Manual process remains fully functional as fallback. No changes to existing release artifacts or tooling.

**Security**: All releases created in draft mode requiring manual publication. GPG signing and commit signing preserved. Cross-repo access via fine-grained Personal Access Token with minimal permissions.
